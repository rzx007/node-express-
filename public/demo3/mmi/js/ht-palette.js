!function(U,n,G){"use strict";var a="px",$="0",p="innerHTML",h="className",z=ht.Default,F=ht.Color,g=ht.Node,E="position",N="top",q="left",O=z.animate,k=z.getInternal(),c="width",$="0",I="none",r="max-height",K="font",S="background",y="border-box",i="user-select",w="box-sizing",J="overflow",M=z.isTouchable,k=z.getInternal(),_=F.titleIconBackground,Q=z.scrollBarInteractiveSize,e=/msie 9/.test(U.navigator?U.navigator.userAgent.toLowerCase():""),V=null,x=function(){return document},R=function(b){return x().createElement(b)},d=function(){return R("div")},u=function(){var L=d(),e=L.style;return e.msTouchAction=I,e.cursor="default",M&&e.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",V),e.position="absolute",e.left=$,e.top=$,L},D=function(){return R("canvas")},L=function(){return document.body},j=function(I,D,W){I.style.setProperty(D,W,V)},o=function(n,o){n.style.removeProperty(o)},C=function(H,O,$){z.def(ht.widget[H],O,$)},A=function(A,V){A.appendChild(V)},B=function(n,L){n.removeChild(L)},P=k.addEventListener;k.removeEventListener,k.addMethod(z,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:_,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:_}]},paletteTitleLabelColor:z.labelSelectColor,paletteTitleLabelFont:z.labelFont,paletteContentLabelFont:z.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:z.widgetTitleHeight,paletteTitleBackground:F.titleBackground,paletteTitleHoverBackground:F.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:G,paletteItemHoverBorderColor:F.highlight,paletteItemSelectBackground:F.highlight},!0);var f=".palette-item:hover{border: 1px solid "+z.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+z.paletteTitleHoverBackground+" !important}",m=document.createElement("style");M||(m.styleSheet?m.styleSheet.cssText=f:m.appendChild(x().createTextNode(f))),x().getElementsByTagName("head")[0].appendChild(m);var b=function(n){var T=this;T.$22h=n,T.addListeners()};z.def(b,n,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var u=this;u.$36h&&L().removeChild(u.$36h),u.$23h=u.$24h=u.$25h=u.$35h=u.$36h=V},handle_touchstart:function(L){for(var f,A=this,W=A.$22h,w=L.target,v=W.sm(),j=W.dm(),D="palette-header",M="palette-header-tool",x="palette-item",y=!1,U=!1,t=!1;w&&(w[h]||"").indexOf(D)<0&&(w[h]||"").indexOf(x)<0;)w=w.parentNode;if(w&&w[h].indexOf(M)>=0?y=!0:w&&w[h].indexOf(D)>=0?t=!0:w&&w[h].indexOf(x)>=0&&(U=!0),z.isLeftButton(L))if(A.$27h(L))A.$24h=z.getClientPoint(L),A.$25h=W.ty();else if(y){z.preventDefault(L),f=w.parentNode.$11h;var Y=j.getDataById(f),G=Y.s("tools")[w.toolIndex];G.action&&G.action.call(W)}else if(t){z.preventDefault(L),f=w.$11h;var Y=j.getDataById(f);Y.isExpanded()?Y.setExpanded(!1):Y.setExpanded(!0)}else if(U){f=w.$11h;var m=j.getDataById(f);v.ss(m),W.handleDragAndDrop&&(z.preventDefault(L),m.s("draggable")&&(W.handleDragAndDrop(L,"prepare"),A.$35h=0)),m.s("draggable")||(z.preventDefault(L),A.$24h=z.getClientPoint(L),A.$25h=W.ty())}else z.preventDefault(L),A.$24h=z.getClientPoint(L),A.$25h=W.ty();else A.$26h(L)},handle_mousedown:function(S){this.handle_touchstart(S)},handle_mousewheel:function(P){this.handleScroll(P,P.wheelDelta/40,P.wheelDelta!==P.wheelDeltaX)},handle_DOMMouseScroll:function(w){this.handleScroll(w,-w.detail,1)},handleScroll:function(w,K,S){var R=this.$22h;z.preventDefault(w),S&&R._41o()&&R.ty(R.ty()+20*K)},handle_mouseup:function(O){this.handle_touchend(O)},handle_touchend:function(F){var x=this;x.$37h(F),x.$26h(F)},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(j){var g=this;g.$37h(j),g.$26h(j)},$37h:function(h){var Q=this,R=Q.$22h;2===Q.$35h&&(Q.$35h=3,R.handleDragAndDrop(h,"end"))},handleWindowMouseMove:function(c){this.handleWindowTouchMove(c)},handleWindowTouchMove:function(Z){var V=this,m=V.$22h,D=V.$23h,r=V.$24h,k=V.$25h,j=z.getClientPoint(Z),E=m._29I,O=V.$36h;if(1===V.$35h||2===V.$35h){if(V.$35h=2,m.handleDragAndDrop(Z,"between"),M){var W=Z.touches[0];Z=W?W:Z.changedTouches[0]}O.style.left=Z.pageX-parseInt(O.width)/2+a,O.style.top=Z.pageY-parseInt(O.height)/2+a}else"p"===D?m.ty(k+j.y-r.y):"v"===D&&m.ty(k+(r.y-j.y)/E.height*m._59I)},handle_mousemove:function(Q){this.handle_touchmove(Q)},handle_touchmove:function(A){if(!z.isDragging()&&z.isLeftButton(A)){var $=this,o=$.$22h,T=$.$27h(A);if($.$24h){if(!$.$23h){if(z.getDistance(z.getClientPoint(A),$.$24h)<2)return;$.$23h=T?"v":"p",z.startDragging($)}}else if(T)o._43o();else if(0===$.$35h){if($.$35h=1,o.handleDragAndDrop(A,"begin"),M){var O=A.touches[0];A=O?O:A.changedTouches[0]}var G=$.$36h=new Image,J=o.$10h[o.sm().ld().getId()].querySelector(".image-box"),R=parseInt(J.style.width),i=parseInt(J.style.height);G.draggable=!1,G.src=J.toDataURL(),G.width=R,G.height=i,G.style.position="absolute",G.style.left=A.pageX-R/2+a,G.style.top=A.pageY-i/2+a,L().appendChild(G),z.startDragging($)}}},$27h:function(k){var v=this.$22h,l=v.getView(),b=l.getBoundingClientRect(),a=v._29I,w=k.clientX-b.left+l.scrollLeft;return v._41o()&&a.x+a.width-w<Q}}),ht.widget.Palette=function(Z){var l=this,Q=l._view=k.createView(null,l);l.$9h={},l.$10h={},l.$4h={},l._29I={x:0,y:0,width:0,height:0},l._59I=0,l.dm(Z?Z:new ht.DataModel),Q[h]="ht-widget-palette",l.$29h=new b(l),j(Q,S,z.paletteContentBackground),j(Q,J,"auto"),j(Q,w,y),j(Q,"-moz-"+w,y),j(Q,"-webkit-"+i,I),j(Q,"-moz-"+i,I),j(Q,"-ms-"+i,I),j(Q,i,I),j(Q,"position","absolute"),j(Q,"overflow","hidden"),A(Q,l._79O=u()),P(Q,"dragstart",function(R){R.dataTransfer&&(R.dataTransfer.setData("Text","nodeid:"+R.target.$11h),R.dataTransfer.effectAllowed="all",l.$29h.$26h())})},C("Palette",n,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:z.autoHideScrollBar,_scrollBarSize:z.scrollBarSize,_scrollBarColor:z.scrollBarColor,getViewRect:function(){return this._29I},ty:function(i){return i==V?this.getTranslateY():(this.setTranslateY(i),void 0)},setTranslateY:function(c){if(this.$32h==V){var D=this,J=D.$33h(c),W=D.$30h;D.$30h=J,D.fp("translateY",W,J)}},getTranslateY:function(){return this.$30h},setLayout:function(M){var E,U,Y=this,Z=Y._layout;Y._layout=M,"smallicons"===M?E=U=20:"iconsonly"===M?E=U=50:(E=70,U=50),Y.setItemImageWidth(E),Y.setItemImageHeight(U),Y.setItemImagePadding(4),Y.fp("layout",Z,M)},getDataAt:function(v){for(var p=v.target;p&&p.$11h==V;)p=p.parentNode;return p&&p.$11h!=V?this.getDataModel().getDataById(p.$11h):void 0},$20h:function(){var $=16;return M&&($*=1.2),$},$19h:function(){return z.paletteTitleHeight},$18h:function(){var M=z.paletteSeparatorWidth,y=z.paletteTitleBackground,I=z.paletteSeparatorColor||z.brighter(y);return M+a+" solid "+I},$17h:function(q){j(q,"cursor","pointer"),j(q,"display","inline-block"),j(q,"margin-right",(M?8:4)+a),j(q,"vertical-align",N)},$1h:function(b){var t=this,F=d(),C=d(),U=R("span");F[h]="palette-header",j(F,E,"relative"),j(F,S,z.paletteTitleBackground),j(F,"color",z.paletteTitleLabelColor),j(F,N,$),j(F,w,y),j(F,"-moz-"+w,y),j(F,"padding","0 5px 0 0"),j(F,"border-top",t.$18h()),j(F,c,"100%"),j(F,"cursor","pointer"),j(F,"white-space","nowrap"),j(F,J,"hidden"),j(F,K,z.paletteTitleLabelFont),j(F,"line-height",t.$19h()+a),F.$11h=b.getId();var L=D(),x=t.$19h(),u=t.$20h();t.$17h(L),k.setCanvas(L,u,x),A(F,L);var W=b.s("tools");if(W)for(var G=0;G<W.length;G++){var M=D();t.$17h(M),k.setCanvas(M,u,x),M[h]="palette-header-tool palette-header-tool"+b.getId()+"-"+G,M.style.position="absolute",M.style.right=(u+10)*G+"px",M.toolIndex=G,A(F,M)}return L[h]="palette-toggle-icon-"+b.getId(),C[h]="palette-content",j(C,"max-height",0+a),j(C,K,z.paletteContentLabelFont),j(C,J,"hidden"),C.$11h=b.getId(),t.$9h[b.getId()]=C,U[p]=b.getName(),j(U,K,z.paletteTitleLabelFont),A(F,L),A(F,U),[F,C]},$2h:function(U){var n=this,H=n._layout,F=e&&U.s("draggable")?R("a"):d(),S=D(),L=d(),X=U.getName()||"",y=U.s("title")||U.getToolTip()||X,G=n._itemMargin;S[h]="image-box";var T=n.getItemImageWidth(),s=n.getItemImageHeight();return k.setCanvas(S,T,s),A(F,S),L[p]=X,L[h]="label-box","iconsonly"!==H&&A(F,L),F[h]="palette-item",j(F,"vertical-align",N),j(F,"cursor","pointer"),j(F,"border-radius",5+a),j(F,"border","1px solid transparent"),j(F,"text-align","center"),j(F,"display","inline-block"),j(F,"margin-left",G+a),j(F,"margin-top",G+a),j(F,"color",z.paletteContentLabelColor),"smallicons"===H?(j(S,"vertical-align","middle"),j(F,"margin-left",2+a),j(F,"margin-top",2+a),j(F,"padding",2+a),j(F,"text-align",q),j(L,"display","inline-block"),j(L,"min-width",n.$21h+n._itemMargin+a)):"largeicons"===H&&(j(L,"max-width",T+a),j(L,"overflow","hidden")),F.$11h=U.getId(),y&&(F.title=y),U.s("draggable")&&!n.handleDragAndDrop&&(e?(F.href="#",j(F,"text-decoration",I)):F.draggable="true"),F},$16h:function(I,P,w,E){var d=k.initContext(I);k.translateAndScale(d,0,0,1),d.clearRect(0,0,w,w);var R=(w-E)/2;z.drawStretchImage(d,z.getImage(P),"fill",0,R,E,E),d.restore()},$15h:function(B){var b=this,C=B.getId(),J=b._view.querySelector(".palette-toggle-icon-"+C),X=B.isExpanded()?z.paletteCollapseIcon:z.paletteExpandIcon;if(J&&X){var q=b.$19h(),x=b.$20h();b.$16h(J,X,q,x)}},_drawToolsIcon:function(t){var T=this,$=t.s("tools");if($)for(var p=0;p<$.length;p++){var O=T._view.querySelector(".palette-header-tool"+t.getId()+"-"+p),R=$[p].icon,Z=T.$19h(),b=T.$20h();T.$16h(O,R,Z,b)}},$14h:function(x){var F=this,f=x.getId(),R=F.$10h[f].querySelector(".image-box"),J=x.getImage(),K=x.s("image.stretch");if(R&&J){var r=k.initContext(R),O=F.getItemImagePadding();O="smallicons"===F._layout?O/2:O;var $=F.getItemImageWidth()-2*O,P=F.getItemImageHeight()-2*O;k.translateAndScale(r,0,0,1),r.clearRect(0,0,$,P),z.drawStretchImage(r,z.getImage(J),K,O,O,$,P,x,F),r.restore()}},validateImpl:function(){var U,v,Q,E=this,T=E.$9h,u=E._layout,j=E.$10h,s=E.$4h,y=E._view,l=E.dm();if(E.$13h&&(delete E.$13h,s={},l.each(function(g){s[g.getId()]=g})),"smallicons"===u)for(var L in s){var n=s[L];if(n instanceof g){var F=n.getName()||"",c=z.getTextSize(z.paletteContentLabelFont,F).width;E.$21h!=V&&E.$21h>c||(E.$21h=c)}}for(var L in s){Q=s[L];var W,f;if(l.contains(Q)){if(Q instanceof ht.Group){var m,K=E.$1h(Q),d=j[Q.getId()];d&&(m=d.nextSibling,B(y,m),B(y,d)),v=l.getSiblings(Q).indexOf(Q);var J=y.children[2*v]||E._79O;J&&J.parentNode?(y.insertBefore(K[0],J),y.insertBefore(m||K[1],J)):(y.appendChild(K[0]),y.appendChild(m||K[1])),j[Q.getId()]=K[0],U=T[Q.getId()]=m||K[1],f=Q.$12h;var S=Q.s("promptText");f||(Q.$12h=R("div"),Q.$12h[p]=S||"",f=Q.$12h),0===Q.getChildren().size()?U.contains(f)||A(U,f):U.contains(f)&&B(U,f)}else if(W=Q.getParent()){var N=E.$2h(Q),_=j[Q.getId()];U=T[W.getId()],_&&B(_.parentNode,_),v=l.getSiblings(Q).indexOf(Q);var M=U.children[v];M?U.insertBefore(N,M):A(U,N),j[Q.getId()]=N,E.$14h(Q)}}else{var k=j[Q.getId()],t=k.parentNode;if(Q instanceof ht.Group){var e=k.nextSibling;B(y,k),B(y,e),delete T[Q.getId()]}else B(t,k),0===t.children.length&&(W=l.getDataById(t.$11h),W&&(f=W.$12h,f&&!t.contains(f)&&A(t,f)));delete j[Q.getId()]}}E.$4h={};var x=function(){var L=E._59I,c=0;E.$32h!=V&&(clearInterval(E.$32h),c=0,delete E.$32h),E.$32h=setInterval(function(){E.$31h(),L===E._59I?(c++,c>=2&&(clearInterval(E.$32h),delete E.$32h)):(c=0,L=E._59I)},30)};for(var H in T)if(U=T[H],Q=l.getDataById(T[H].$11h),E.$15h(Q),E._drawToolsIcon(Q),Q.isExpanded()){if(U.style.maxHeight===0+a){var w=U.scrollHeight+E._itemMargin+a;O(U).duration(200).set(r,w).set("padding-bottom",E._itemMargin+a).end(function(){return function(){x()}}(w))}else U.style.maxHeight=U.scrollHeight+a;U.style.paddingBottom=E._itemMargin+a}else U.style.maxHeight!==0+a&&O(U).duration(200).set(r,$).set("padding-bottom",$).end(function(){return function(){x()}}(U));E.$28h(),E.$31h()},$31h:function(){for(var v=this,z=v._view,s=0,x=z.children,p=0;p<x.length;p++){var q=x[p];q.className&&q.className.indexOf("palette-")>=0&&(s+=q.offsetHeight)}v._59I=s,v.$30h=v.$33h(v.ty());var L=v.ty();z.scrollTop=-L,v._29I={x:0,y:-L,width:z.clientWidth,height:z.clientHeight},j(v._79O,N,-L+a),v._93I()},$33h:function(g){var f=this,_=f._29I.height-f._59I;return _>g&&(g=_),g>0?0:Math.round(g)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(X){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(X.property)<0&&this.redraw(),"translateY"===X.property&&(this.iv(),this._43o())},findDataByName:function(o){for(var i=this.dm().getDatas(),S=0;S<i.size();S++){var C=i.get(S);if(C.getName()===o)return C}},setDataModel:function(l){var u=this,O=u._dataModel,K=u._selectionModel;O!==l&&(O&&(O.umm(u.$6h,u),O.umd(u.$8h,u),O.umh(u.$7h,u),K||O.sm().ums(u.$28h,u)),u._dataModel=l,l.mm(u.$6h,u),l.md(u.$8h,u),l.mh(u.$7h,u),K?K._21I(l):l.sm().ms(u.$28h,u),u.sm().setSelectionMode("single"),u.fp("dataModel",O,l))},$6h:function(I){var c=this,i=c._view,O=I.data,L=c.$4h;"add"===I.kind?L[O.getId()]=O:"remove"===I.kind?L[O.getId()]=O:"clear"===I.kind&&(c.$10h={},c.$9h={},c.$4h={},i[p]=""),c.iv()},$7h:function(U){var z=this,S=U.data;z.$4h[S.getId()]=S,z.iv()},$8h:function(g){var I=this,s=g.data,W=g.property;"expanded"===W?I.iv():(I.$4h[s.getId()]=s,I.iv())},$28h:function(){var u,G=this,O=G.sm(),X="palette-item",L=O.ld();this.dm().each(function(l){u=G.$10h[l.getId()],u&&u[h].indexOf(X)>=0&&(l===L?j(u,S,z.paletteItemSelectBackground):o(u,S))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);