!function(T,s){"use strict";var D="position",S="absolute",P="relative",R="px",Y="left",W="right",A="top",w="bottom",B="display",J="none",O="block",z=ht.Default,E=z.getInternal(),a=Math.floor,X=Math.ceil,j=Math.PI,o=null,c=T.parseInt,q=function(A){return A.getContext("2d")},b=function(){return document},f=function($){return b().createElement($)},m=function(){return f("canvas")},G=function(s,B,E){s.style.setProperty(B,E,o)},F=function(P,a,f){z.def(ht.widget[P],a,f)},h=function(r,D){r.appendChild(D)},g=function(y,w){y.removeChild(w)},E=z.getInternal(),i=E.addEventListener,n=E.removeEventListener;ht.widget.RulerFrame=function(N){var X=this,A=X._view=E.createView(null,X),g=X.$1k=m(),B=X.$2k=m(),$=X.$3k=m(),u=X.$4k=m();X._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},X._topRulerConfig={visible:!0},X._rightRulerConfig={visible:!1},X._bottomRulerConfig={visible:!1},X._leftRulerConfig={visible:!0},h(A,g),h(A,$),h(A,B),h(A,u),G(A,D,P),G(A,"box-sizing","border-box"),G(A,"-moz-box-sizing","border-box"),G(g,D,S),G(B,D,S),G($,D,S),G(u,D,S),X.$14k=function(){X.$13k=1,X.iv()},X.$15k=function(j){if(X._topRulerConfig.guideVisible||X._rightRulerConfig.guideVisible||X._bottomRulerConfig.guideVisible||X._leftRulerConfig.guideVisible||X._defaultRulerConfig.guideVisible||(X._topRulerConfig.guideTipVisible||X._rightRulerConfig.guideTipVisible||X._bottomRulerConfig.guideTipVisible||X._leftRulerConfig.guideTipVisible||X._defaultRulerConfig.guideTipVisible)&&X._component){var l=A.getBoundingClientRect();X.$16k={x:j.clientX-l.left,y:j.clientY-l.top},X.$5k()}},X.setComponent(N)},F("RulerFrame",s,{ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(X){var Z=this,$=Z._component,v=Z.getView();if(v){if(Z._component=X,Z.fp("component",$,X),$){var C=Z.getComponentView($);g(v,C),n(v,"mousemove",Z.$15k),Z.removeComponentPropertyChangeListener($,Z.$14k)}if(X){var z=Z.getComponentView(X);h(v,z),G(z,D,S),i(v,"mousemove",Z.$15k),Z.addComponentPropertyChangeListener(X,Z.$14k)}}},addComponentPropertyChangeListener:function(S,c){S&&S.mp&&S.mp(c)},removeComponentPropertyChangeListener:function(E,K){E&&E.ump&&E.ump(K)},getComponentHZoom:function(r){return r&&r.getZoom?r.getZoom():1},getComponentVZoom:function(I){return I&&I.getZoom?I.getZoom():1},getComponentViewRect:function(u){return u&&u.getViewRect?u.getViewRect():void 0},getComponentView:function(I){return I&&I.getView?I.getView():I},invalidateComponent:function(Y){Y&&Y.iv&&Y.iv()},validateComponent:function(M){M&&M.validate&&M.validate()},$7k:function(U,Y,x,I,a,H,w,c,$,S,L,b){if(Y.visible){var p=this._defaultRulerConfig,V="borderStyle",z="borderColor",v="borderWidth",W="background",n=Y[V]||p[V],A=Y[z]||p[z],t=Y[v]||p[v],y=Y.size!=o?Y.size:p.size,F=Y[W]||p[W],g=y+t,K=this.$6k(t,n,A,U,x,a,g,w,c,$,S,L,b);G(U,a,"0px"),H?E.setCanvas(U,I-K,y):E.setCanvas(U,y,I-K),G(U,"background",F),G(U,B,O)}else G(U,B,J),G(this.getComponentView(this._component),a,"0px")},$6k:function(j,v,I,l,U,S,K,P,C,q,k,B,m){var A=0;return G(l,U,j+"px "+v+" "+I),G(this.getComponentView(this._component),S,K+R),P?(G(l,C,q+R),A+=q):G(l,C,"0px"),k?(G(l,B,m+R),A+=m):G(l,B,"0px"),A},validateImpl:function(){var t=this,C=t._component,_=t.$1k,P=t.$2k,Z=t.$3k,M=t.$4k,R=t._view,g=t._defaultRulerConfig,Q=t._topRulerConfig,j=t._rightRulerConfig,r=t._bottomRulerConfig,I=t._leftRulerConfig,q=g.size;if(R&&C){var i=Q.size!=o?Q.size:q,a=j.size!=o?j.size:q,u=r.size!=o?r.size:q,O=I.size!=o?I.size:q;t.$7k(_,Q,"border-bottom",R.offsetWidth,A,!0,I.visible,Y,O,j.visible,W,a),t.$7k(P,j,"border-left",R.offsetHeight,W,!1,Q.visible,A,i,r.visible,w,u),t.$7k(Z,r,"border-top",R.offsetWidth,w,!0,I.visible,Y,O,j.visible,W,a),t.$7k(M,I,"border-right",R.offsetHeight,Y,!1,Q.visible,A,i,r.visible,w,u),t.$13k?delete t.$13k:t.invalidateComponent(C),t.validateComponent(C),t.$5k()}},$5k:function(){function w(N,v,g,P,D,w){if(v.visible){var y=q(N),b=v[U]||B,Z=v[l]!=o?v[l]:h,A=v[M]||i,$=v[X]||O,p=v.size!=o?v.size:s,jj=v[I]||_,fo=v[H]||F,sj=v[c]||m,Ip=v[E]!=o?v[E]:L,cp=v[j]!=o?v[j]:Q,ld=v[J]!=o?v[J]:f,fp=v[Y]!=o?v[Y]:x,Pk=v[V]!=o?v[V]:a,Cc=v[e]!=o?v[e]:T,ri=v[d]||Gb,Xd=v[n]||Ij;Z&&(b=k[w]=k.$8k(k[w]||b,v[G]||K,v[t]||W,P?u:C,fo)),g.call(k,y,R,S,z,r,p,P?u:C,b,A,$,D,jj,sj);var Kb=k.$16k;(Ip||cp)&&Kb&&(P?k.$9k(y,Kb.x,p,ri,Xd,Ip,cp,ld,fp,Pk,Cc):k.$10k(y,Kb.y,p,ri,Xd,Ip,cp,ld,fp,Pk,Cc,D))}}var k=this,p=k.$1k,P=k.$2k,Z=k.$3k,g=k.$4k,N=k._topRulerConfig,y=k._rightRulerConfig,v=k._bottomRulerConfig,D=k._leftRulerConfig,$=k._defaultRulerConfig,b=k._component,A=k.getComponentViewRect(b),u=k.getComponentHZoom(b),C=k.getComponentVZoom(b),R=A.x*u,z=R+A.width*u,S=A.y*C,r=S+A.height*C,s=k._defaultRulerConfig.size,U="defaultMajorTickSpacing",G="maxPhysicalMajorTickSpacing",t="minPhysicalMajorTickSpacing",l="tickSpacingAdaptable",M="majorTickTextFont",X="majorTickTextColor",I="majorTickColor",c="minorTickColor",E="guideVisible",j="guideTipVisible",J="guideTipBorderColor",Y="guideTipTextColor",V="guideTipTextFont",e="guideTipBackground",d="guideColor",n="guideWidth",H="minMajorTickSpacing",B=$[U],K=$[G],W=$[t],h=$[l],i=$[M],O=$[X],_=$[I],F=$[H],m=$[c],L=$[E],Q=$[j],f=$[J],x=$[Y],a=$[V],T=$[e],Gb=$[d],Ij=$[n];k._view&&b&&(w(p,N,k.$11k,!0,!1,"_currentTopMajorTickSpacing"),w(P,y,k.$12k,!1,!0,"_currentRightMajorTickSpacing"),w(Z,v,k.$11k,!0,!0,"_currentBottomMajorTickSpacing"),w(g,D,k.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(M,N,c,q,v){return c>M*q?M=a(N/q/v)*v:M*q>N&&(M=X(c/q/v)*v),M},getHTipText:function(j){var q=this,H=q._component,N=0,X=q._view.getBoundingClientRect();return H.lp?N=c(H.lp({x:j.x+X.left,y:j.y}).x):N-=c(this.getComponentView(H).style.left)||0,N},$9k:function(l,S,b,w,R,K,O,I,y,g,X){var v=this,U=v._component;l.save(),E.translateAndScale(l,0,0,1);var A=S-(c(this.getComponentView(U).style.left)||0),x=0;if(S=v.getHTipText(v.$16k),K&&(l.beginPath(),l.fillStyle=w,l.rect(A,x,R,b),l.fill()),O){l.beginPath(),l.textAlign="center",l.textBaseline="middle",l.font=g;var t=l.measureText(S).width+6;l.fillStyle=X,l.rect(A-t/2,x,t,b),l.fill(),l.strokeStyle=I,l.stroke(),l.beginPath(),l.fillStyle=y,l.fillText(S,A,x+b/2)}l.restore()},getVTipText:function(h){var Y=this,a=Y._component,Q=0,J=Y._view.getBoundingClientRect();return a.lp?Q=c(a.lp({x:h.x,y:h.y+J.top}).y):Q-=c(this.getComponentView(a).style.top)||0,Q},formatScaleText:function(d){return Math.round(d)},$10k:function(T,r,l,H,_,P,x,Z,Q,V,g,L){var z=this,y=z._component;T.save(),E.translateAndScale(T,0,0,1);var v=l/2,M=r-(c(this.getComponentView(y).style.top)||0);if(r=z.getVTipText(z.$16k),P&&(T.beginPath(),T.fillStyle=H,T.rect(v-l/2,M,l,_),T.fill()),x){T.translate(v,M),T.rotate((L?90:-90)*j/180),T.translate(-v,-M),T.beginPath(),T.textAlign="center",T.textBaseline="middle",T.font=V;var u=T.measureText(r).width+6;T.fillStyle=g,T.rect(v-u/2,M-l/2,u,l),T.fill(),T.strokeStyle=Z,T.stroke(),T.fillStyle=Q,T.fillText(r,v,M)}T.restore()},$11k:function(q,j,i,V,x,U,T,g,Z,Q,p,Y,n){q.save(),i=0;var B=j,R=V,G=(B+R)/2;j=0,V=R-B,E.translateAndScale(q,0,0,1);var m=0,u=0,k=c(U/2),A=U-k,D=p?0:k,P=g*T,K=P/10;j-=P,V+=P,q.clearRect(j,0,V-j,U),q.beginPath(),q.fillStyle=n;var s=a(G/K)*K-B;for(m=s;V>m;m+=K)q.rect(m,i+D,1,A);for(m=s;m>j;m-=K)q.rect(m,i+D,1,A);for(q.fill(),D=p?0:1,q.beginPath(),q.fillStyle=Y,s=a(G/P)*P-B,m=s;V>m;m+=P)q.rect(m,i+D,1,U-1);for(m=s;m>j;m-=P)q.rect(m,i+D,1,U-1);q.fill();var h=c(/\d+px/.exec(Z)[0]),F=(h||10)/2;q.textBaseline="middle",D=p?U-F-2:F+2,q.beginPath(),q.fillStyle=Q,q.font=Z;var X=a(G/P)*P/T;for(m=s,u=X;V>m;m+=P,u+=g){var t=this.getHScaleText?this.getHScaleText(m):u;q.fillText(this.formatScaleText(t),m+2,i+D)}for(m=s,u=X;m>j;m-=P,u-=g){var t=this.getHScaleText?this.getHScaleText(m):u;q.fillText(this.formatScaleText(t),m+2,i+D)}q.restore()},$12k:function(o,b,i,h,v,m,A,M,q,z,Q,D,L){function N(V,e,S,J,f,P){f=I.getVScaleText?I.getVScaleText(S):f,f=I.formatScaleText(f),o.translate(V+e,S),o.rotate(-J),o.translate(-V-e,-S),o.fillText(f,V+e+(P?2:1),S),o.translate(V+e,S),o.rotate(J),o.translate(-V-e,-S)}o.save(),b=0;var F=i,$=v,C=(F+$)/2;i=0,v=$-F,E.translateAndScale(o,0,0,1);var S=0,I=this,r=0,p=c(m/2),t=m-p,K=Q?0:p,B=M*A,T=B/10;i-=B,v+=B,o.clearRect(b,0,m,v-i),o.beginPath(),o.fillStyle=L;var g=a(C/T)*T-F;for(S=g;v>S;S+=T)o.rect(b+K,S,t,1);for(S=g;S>i;S-=T)o.rect(b+K,S,t,1);for(o.fill(),K=Q?0:1,o.beginPath(),o.fillStyle=D,g=a(C/B)*B-F,S=g;v>S;S+=B)o.rect(b+K,S,m-1,1);for(S=g;S>i;S-=B)o.rect(b+K,S,m-1,1);o.fill();var y=c(/\d+px/.exec(q)[0]),e=(y||10)/2,k=90*j/180;o.textBaseline="middle",K=Q?m-e:e+2,k=Q?-k:k,o.beginPath(),o.fillStyle=z,o.font=q;var n=a(C/B)*B/A;for(S=g,r=n;v>S;S+=B,r+=M)N(b,K,S,k,r,Q);for(S=g,r=n;S>i;S-=B,r-=M)N(b,K,S,k,r,Q);o.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var l=this,c=l._component,v=l._view;c&&l.removeComponentPropertyChangeListener(c,l.$14k),v&&(n(v,"mousemove",l.$15k),g(v.parentNode,v),l._view=null)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);