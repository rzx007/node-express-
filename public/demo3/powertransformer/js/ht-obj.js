!function(U,c,T){"use strict";var F="ht",m=U[F],X=null,P=Math,W=P.abs,q=P.max,b=Number.MAX_VALUE,Y=m.Default,I=Y.getInternal(),p=Y.clone,n=I.vec3TransformMat4,u=I.appendArray,k=function(){var K=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,D=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,x=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,i=function(j,u){return u=parseInt(u),u>=0?j[u-1]:j[u+j.length]},B=function(k,U,O,L,H,Y){if(k.vs){var G=i(U,L),C=i(U,H),S=i(U,Y),X=O.matrix,Q=k.vs;if(O.flipFace){var z=C;C=S,S=z}X?(u(Q,n(p(G),X)),u(Q,n(p(C),X)),u(Q,n(p(S),X))):(u(Q,G),u(Q,C),u(Q,S))}},Z=function(M,C,b,N,A,g){if(M.vs){var O=i(C,N),_=i(C,A),B=i(C,g),u=b.flipY;if(b.flipFace){var s=_;_=B,B=s}M.uv.push(O[0],u?1-O[1]:O[1],_[0],u?1-_[1]:_[1],B[0],u?1-B[1]:B[1])}},y=function(Q,v,e,t,q,c){if(Q.vs){var O=i(v,t),B=i(v,q),d=i(v,c),a=e.normalMatrix,$=Q.ns;if(e.flipFace){var E=B;B=d,d=E}a?(u($,n(p(O),a)),u($,n(p(B),a)),u($,n(p(d),a))):(u($,O),u($,B),u($,d))}},Q=function(C,N,W,s,q,R,k,b){var v=s&&s.length&&b;R[3]===T?(B(C,N,q,R[0],R[1],R[2]),k&&Z(C,W,q,k[0],k[1],k[2]),v&&y(C,s,q,b[0],b[1],b[2])):(B(C,N,q,R[0],R[1],R[3]),B(C,N,q,R[1],R[2],R[3]),k&&(Z(C,W,q,k[0],k[1],k[3]),Z(C,W,q,k[1],k[2],k[3])),v&&(y(C,s,q,b[0],b[1],b[3]),y(C,s,q,b[1],b[2],b[3])))},t=function(p,d,f,M){var D,m,C,P,u,e,K,V=b,j=b,Y=b,r=-b,R=-b,s=-b;for(D in p)for(e=p[D].vs,K=e.length,m=0;K>m;m+=3)C=e[m+0],P=e[m+1],u=e[m+2],V>C&&(V=C),j>P&&(j=P),Y>u&&(Y=u),C>r&&(r=C),P>R&&(R=P),u>s&&(s=u);if(f){var F=V+(r-V)/2,h=j+(R-j)/2,O=Y+(s-Y)/2;for(D in p)for(e=p[D].vs,K=e.length,m=0;K>m;m+=3)e[m+0]-=F,e[m+1]-=h,e[m+2]-=O}var k,_,X;f?(k=r-V,_=R-j,X=s-Y):(k=2*q(W(V),W(r)),_=2*q(W(j),W(R)),X=2*q(W(Y),W(s))),M.rawS3=[k,_,X];for(D in p){if(e=p[D].vs,d)for(K=e.length,m=0;K>m;m+=3)k&&(e[m+0]/=k),_&&(e[m+1]/=_),X&&(e[m+2]/=X);p[D].rawS3=M.rawS3}};return function(v,y,S){if(!v)return X;I.isString(y)&&(y=J(y)),S||(S={}),S.flipY==X&&(S.flipY=!0),(S.s3||S.r3||S.t3||S.mat)&&(S.matrix=I.createWorldMatrix(S.mat,S.s3,S.r3,S.rotationMode,S.t3));var l,c,_,b,r,z,U=[],p=[],V=S.ignoreNormal?X:[],N=S.reverseFlipMtls,o={vs:[],uv:[],ns:V?[]:X},m={htdefault:o},W=v.split("\n"),h=0;for(V&&S.matrix&&(S.normalMatrix=I.createNormalMatrix(S.matrix));h<W.length;h++)if(c=W[h].trim(),0!==c.length&&"#"!==c.charAt(0))if(_=K.exec(c))U.push([parseFloat(_[1]),parseFloat(_[2]),parseFloat(_[3])]);else if(_=D.exec(c))p.push([parseFloat(_[1]),parseFloat(_[2])]);else if(V&&(_=x.exec(c)))S.flipFace?V.push([parseFloat(-_[1]),parseFloat(-_[2]),parseFloat(-_[3])]):V.push([parseFloat(_[1]),parseFloat(_[2]),parseFloat(_[3])]);else if("f"===c[0]){var Z=c.split(/\s+/);if(Z.length<4)continue;var g,l,C,i=[],q=[],L=[];for(l=1,C=Z.length;C>l;l++)g=Z[l].split("/"),i.push(parseInt(g[0],10)),g.length>1&&g[1].length>0&&L.push(parseInt(g[1],10)),g.length>2&&g[2].length>0&&q.push(parseInt(g[2],10));for(l=0,C=i.length-2;C>l;l++)Q(o,U,p,V,S,[i[0],i[l+1],i[l+2]],L.length?[L[0],L[l+1],L[l+2]]:X,q.length?[q[0],q[l+1],q[l+2]]:X)}else if(/^usemtl /.test(c)&&(b=c.substring(7).trim(),!(o=m[b]))){if(o={name:b,vs:[],uv:[],ns:V?[]:X},S.ignoreMtls&&S.ignoreMtls.indexOf(b)>=0&&delete o.vs,(S.reverseFlip||"*"===N||N&&N.indexOf(b)>=0)&&(o.reverseFlip=!0),y&&(r=y[b],r&&(S.ignoreColor||(o.color=r.kd),!S.ignoreTransparent&&r.d>0&&r.d<1&&(o.transparent=!0,o.opacity=r.d),!S.ignoreImage&&(z=r.map_kd)))){for(z=z.split(" "),l=0;l<z.length;l++)"-o"===z[l]?(o.uvOffset=[parseFloat(z[l+1]),parseFloat(z[l+2])],l+=2):"-s"===z[l]&&(o.uvScale=[parseFloat(z[l+1]),parseFloat(z[l+2])],l+=2);o.image=(S.prefix||"")+z[z.length-1]}m[b]=o}var B=[];for(var f in m){var e=m[f].vs;e&&0!==e.length||B.push(f)}B.forEach(function(a){delete m[a]}),t(m,S.cube,S.center,S);var n=S.shape3d;if(n){var w=[];for(var b in m){var o=m[b];w.rawS3=o.rawS3,w.push(o)}Y.setShape3dModel(n,w)}return m}}(),J=function(S){var R={};if(S)for(var h,i,O,N,K,Z,D=S.split("\n"),p=/\s+/,Q=0;Q<D.length;Q++)i=D[Q].trim(),0!==i.length&&"#"!==i.charAt(0)&&(O=i.indexOf(" "),N=(O?i.substring(0,O):i).toLowerCase(),K=(O?i.substring(O+1):"").trim(),"newmtl"===N?R[K]=h={name:K}:h&&("ka"===N||"kd"===N||"ks"===N?(Z=K.split(p,3),h[N]=[parseFloat(Z[0]),parseFloat(Z[1]),parseFloat(Z[2]),1]):h[N]="ns"===N||"d"===N?parseFloat(K):K));return R};I.addMethod(Y,{loadObj:function(Z,h,m){m=m||{},Y.xhrLoad(h?[Z,h]:[Z],function(l){var y,x=m.finishFunc,X=m.shape3d,$=l?k(l[0],l[1],m):null;if($){if(X)y=Y.getShape3dModel(X);else{y=[];for(var i in $){var u=$[i];y.rawS3=u.rawS3,y.push(u)}}x&&x($,y,y.rawS3)}else x&&x(null)},m)},parseObj:function(e,r,U){return k(e,r,U)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);